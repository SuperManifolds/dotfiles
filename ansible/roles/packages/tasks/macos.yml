---
- name: Install Homebrew CLI packages from Brewfile
  community.general.homebrew_bundle:
    file: "{{ playbook_dir }}/../Brewfile"
    state: present
  become: false

- name: Install Homebrew desktop packages from Brewfile.desktop
  community.general.homebrew_bundle:
    file: "{{ playbook_dir }}/../Brewfile.desktop"
    state: present
  become: false
  when: install_desktop | default(true)

# Dev tools (via mise)
- name: Install tools via mise
  ansible.builtin.command:
    cmd: mise use -g {{ item }}
  loop:
    - golangci-lint
  changed_when: true

# Install Rust stable toolchain
- name: Install Rust stable toolchain
  ansible.builtin.command:
    cmd: rustup default stable
  changed_when: true

# Install Swift latest
- name: Install Swift latest
  ansible.builtin.command:
    cmd: swiftly install latest
  changed_when: true
